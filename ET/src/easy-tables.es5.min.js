"use strict";function _interopRequireDefault(n){return n&&n.__esModule?n:{"default":n}}function Init(){_srcInjectCssJs2["default"].Append(dynamicStyleTemplate,{});handlebars.registerHelper("getValue",function(n,t){var i=0;for(var r in n){if(i==t)return n[r];i++}});handlebars.registerHelper("getValueName",function(n,t){return Object.keys(n)[t]});handlebars.registerHelper("PrintValues",function(n){n&&console.log(n)});handlebars.registerHelper("_add1",function(n){return n+1});handlebars.registerHelper("eq",function(n,t){return n==t});handlebars.registerHelper("neq",function(n,t){return n!=t});handlebars.registerHelper("returnIfEvenNumber",function(n,t){return t%2==0?n:null});handlebars.registerHelper("returnIfUnEvenNumber",function(n,t){return t%2!=0?n:null});handlebars.registerHelper("GetItemByName",function(n,t){return n[t]});handlebars.registerHelper("IfNot",function(n){return n==undefined||n==null?!0:typeof n=="boolean"?!n:!1});handlebars.registerHelper("NthOpt",function(n,t){var r=""+t,i=n.NthOpt;return i===undefined?"":i[r]||""});handlebars.registerHelper("buildArray",function(n){var t="";return n.forEach(function(n){var r=n.row,u=n.alignment||"center",f=n["class"]||"col",i="<div class='row margin-0 no-gutters isarray'>",e="text-"+u;r.forEach(function(n){var t=n==="";t&&(n="");i+="<div class='"+e+" "+f+"'>"+n+"<\/div>"});i+="<\/div>";t+=i}),t})}function MapHtmlToJson(n){return n.find("input:hidden").serializeArray().map(function(n){var t=[];return t[n.name]=n.value,t}).reduce(function(n,t){return $.extend({},n,t)},{})}function RecompileNestedTemplates(n){var t=$(n).find(".dt-row");t.each(function(){var n=MapHtmlToJson($(this)),t=$(this).html(),i=handlebars.compile(t),r=i(n);$(this).html(r)})}var dynamicTemplate,dynamicStyleTemplate,_properties;Object.defineProperty(exports,"__esModule",{value:!0});var _srcInjectCssJs=require("../src/inject-css.js"),_srcInjectCssJs2=_interopRequireDefault(_srcInjectCssJs),handlebars=require("handlebars"),$=require("jquery");$.fn.serializeObject=function(){var n={},t=this.serializeArray();return $.each(t,function(){n[this.name]?(n[this.name].push||(n[this.name]=[n[this.name]]),n[this.name].push(this.value||"")):n[this.name]=this.value||""}),n};dynamicTemplate='\n    <div class="dynamic-table-desktop">\n        <div class="tb {{#if bordered}}  {{else}}  {{/if}}">\n            <div class="row no-gutters">\n                {{#each headers}}\n                    <div class="col col-{{col}} p-1 header-cell {{class}} {{desktopClass}} {{headerClass}} {{#if headerInvisible}} hidden-handlebars-item {{/if}} {{#if hiddenInput}}hidden-handlebars-item{{/if}}" {{#if filter}} filter="{{filter}}"{{/if}}>{{name}}<\/div>\n                {{/each}}\n            <\/div>\n            {{#each rows}}\n                <div class="row no-gutters {{NthOpt ../this @index}} dt-row">\n                    {{#each ../headers}}\n                        <input type="hidden" name="{{getValueName ../this @index}}" value="{{getValue ../this @index}}">\n                        <div class="col col-{{col}} {{#if rowClass}}{{rowClass}}{{else}}p-1{{/if}} {{class}} {{desktopClass}}" title="{{{title}}}" {{#if data}} data-{{data}}="{{GetItemByName ../this data}}" {{/if}}>{{#if isHTML}}{{{getValue ../this @index}}}{{else if isArray}}{{{buildArray (getValue ../this @index)}}}{{else if template}}{{{template}}}{{else}}{{getValue ../this @index}}{{/if}}<\/div>\n                    {{/each}}\n                <\/div>\n            {{/each}}\n        <\/div>\n    <\/div>\n    <div class="dynamic-table-mobile structure" {{#if maxheight}} style="max-height:{{maxheight}}" {{else}} style="max-height:300px" {{/if}}>\n        <div class="tb  {{#if bordered}}  {{else}}  {{/if}}">\n                {{#if (eq MobileRenderMode \'OneHeader\')}}\n                {{#each headers}}\n                <div class="row no-gutters dt-row">\n                    <div class="col-12 {{class}} {{headerClass}} header-cell grey {{NthOpt ../this @index}} {{#if headerInvisible}} hidden-handlebars-item{{/if}}">{{name}}<\/div>\n                    {{#each ../rows}}\n                        {{#if hiddenInput}}\n                            <input type="hidden" name="{{getValueName this @../index}}" value="{{getValue� this @../index}}"/>\n                        {{else}}\n                            <div class="col-12 {{../class}} {{../rowClass}} {{../mobileClass}} {{NthOpt ../../this @index}}" title="{{../title}}" {{#if ../data}} data-{{ ../data}}="{{GetItemByName this ../data}}" {{/if}}>{{#if ../isHTML}}{{{getValue this @../index}}}{{else if isArray}}{{{buildArray (getValue ../this @index)}}}{{else if template}}{{{template}}}{{else}}{{getValue this @../index}}{{/if}}<\/div>\n                        {{/if}}\n                    {{/each}}\n                <\/div>\n                {{/each}}\n                {{/if}}\n                {{#if (eq MobileRenderMode \'PairRender\')}}\n                {{#each rows}}\n                {{#each ../headers}}\n                {{#if (returnIfEvenNumber true @../index)}}\n                {{#if (getValue ../this @index)}}\n                <div {{#unless NoNthOptInMobile}} class="{{NthOpt ../../this @index}}" {{/unless}}>\n                    {{#if hiddenInput}}\n                        <input type="hidden" name="{{getValueName this @../index}}" value="{{getValue this @../index}}"/>\n                    {{else}}\n                        <div class="col-12 {{class}} {{rowClass}} {{mobileClass}} {{../../OnEvenClass}}" title="{{title}}" {{#if data}} data-{{data}}="{{GetItemByName this data}}" {{/if}}>{{#if isHTML}}{{{getValue this @../index}}}{{else if isArray}}{{{buildArray (getValue ../this @index)}}}{{else if template}}{{{template}}}{{else}}{{getValue ../this @index}}{{/if}}<\/div>\n                    {{/if}}\n                <\/div>\n                {{/if}}\n                {{#if (getValue (GetItemByName ../../rows (_add1 @../index)) @index)}}\n                <div {{#unless NoNthOptInMobile}} class="{{NthOpt ../../this (_add1 @index)}}" {{/unless}}>\n                    {{#if hiddenInput}}\n                        <input type="hidden" name="{{getValueName ../../rows (_add1 @../index)}}" value="{{getValue ../../rows (_add1 @../index)}}""/>\n                    {{else}}\n                        <div class="col-12 {{class}}" title="{{title}}" {{#if data}} data-{{data}}="{{GetItemByName this data}}" {{/if}}><div class="{{rowClass}} {{mobileClass}} {{../../OnUnEvenClass}}">{{#if isHTML}}{{{getValue (GetItemByName ../../rows (_add1 @../index)) @index}}}{{else if isArray}}{{{buildArray (getValue (GetItemByName ../../rows (_add1 @../index)) @index)}}}{{else if template}}{{{template}}}{{else}}{{getValue (GetItemByName ../../rows (_add1 @../index)) @index}}{{/if}}<\/div><\/div>\n                    {{/if}}\n                <\/div>\n                {{/if}}\n                {{/if}}\n                {{/each}}\n                {{/each}}\n                {{/if}}\n                {{#if (eq MobileRenderMode \'Normal\')}}\n                {{#each rows}}\n                <div class=\'dt-row\'>\n                {{#each ../headers}}\n                <div class="row no-gutters {{returnIfUnEvenNumber \'grey\' @../index}} {{NthOpt ../this @../index}}">\n                    <input type="hidden" name="{{getValueName ../this @index}}" value="{{getValue ../this @index}}"/>\n                    <div class="col col-6 header-cell {{class}} {{headerClass}} {{#if headerInvisible}} hidden-handlebars-item{{/if}} {{#if hiddenInput}}hidden-handlebars-item{{/if}}" {{#if filter}}filter="{{filter}}"{{/if}}>{{name}}<\/div>\n                    <div class="col {{#if headerInvisible}}col-12{{else}}col-6{{/if}}{{class}}{{rowClass}}{{mobileClass}}" title="{{title}}" {{#if data}} data-{{data}}="{{GetItemByName ../this data}}" {{/if}}>{{#if isHTML}}{{{getValue ../this @index}}}{{else if isArray}}{{{buildArray (getValue ../this @index)}}}{{else if template}}{{{template}}}{{else}}{{getValue ../this @index}}{{/if}}<\/div>\n                <\/div>\n                {{/each}}\n                <\/div>\n                {{/each}}\n                {{/if}}\n        <\/div>\n    <\/div>\n';dynamicStyleTemplate='\n    .margin-30 {\n    margin-left: 30px;\n    margin-right: 30px; }\n\n\n    .grey {\n    background-color: #efefef; }\n\n\n    .hidden-handlebars-item {\n    display: none !important;\n    visibility: hidden; }\n\n\n    @media only screen {\n    .dynamic-table-mobile.structure {\n    overflow-x: hidden;\n    overflow-y: scroll; }\n    .dynamic-table-mobile .row th, .dynamic-table-mobile .row td {\n    padding-left: 10px;\n    overflow-wrap: break-word; }\n    .dynamic-table-mobile .row th, .dynamic-table-mobile .row td {\n    padding-left: 20px;\n    overflow-wrap: break-word; } }\n\n\n        .dynamic-table-desktop {\n        display: none;\n        visibility: hidden; }\n\n\n    @media (min-width: 720px) {\n    .dynamic-table-mobile {\n    display: none; }\n    .dynamic-table-desktop {\n    display: block;\n    visibility: visible; } }\n\n\n    [filter]{\n        cursor: pointer;\n    }\n\n\n    .asc[filter]:after {\n        padding-left:3px;\n        content: "⇩";\n    }\n\n\n    .desc[filter]:after {\n        padding-left: 3px;\n        content: "⇧";\n    }\n\n    .tb .row:not(.isarray) > .col {\n        border-left:1px solid #DEE2E6;\n    }\n    .tb .row:not(.isarray) > .col:last-child {\n        border-right:1px solid #DEE2E6;\n    }\n\n    .tb .row:not(.isarray) {\n        border-top:1px solid #DEE2E6;\n    }\n\n    .tb .row:last-child:not(.isarray) {\n        border-bottom:1px solid #DEE2E6;\n    }\n\n    .tb .header-cell{\n        font-weight:bold;\n    }\n';Init();_properties={headers:[{}],rows:[],bordered:!0,MobileRenderMode:"Normal",NoNthOptInMobile:!1};exports["default"]={CreateTable:function(n,t){var i=$.extend({},_properties,t),r=dynamicTemplate,u=handlebars.compile(r),f=u(i);return $(n).html(f),RecompileNestedTemplates(n),$(n)},SerializeTableContainer:function(n){return $(n).find("input[type='hidden'], :input:not(:hidden)").serializeObject()}};module.exports=exports["default"];